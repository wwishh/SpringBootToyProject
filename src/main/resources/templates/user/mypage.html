<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>마이페이지</title>
  <link rel="stylesheet" th:href="@{/css/auth.css}">
</head>
<body>
<div class="container">
  <h1>마이페이지</h1>

  <div th:if="${successMessage}" class="success" th:text="${successMessage}"></div>
  <div th:if="${errorMessage}" class="error" th:text="${errorMessage}"></div>

  <form th:action="@{/mypage}" method="post" enctype="multipart/form-data">
    <label>아이디</label>
    <input type="text" th:value="${user.username}" readonly>

    <label>이메일</label>
    <input type="email" name="email" th:value="${user.email}" required>

    <label>비밀번호 (변경 시에만 입력)</label>
    <input type="password" name="password">

    <label>프로필 사진</label>
    <input type="file" name="profileImage" accept="image/*">

    <div th:if="${user.profileImage}">
      <p>현재 프로필:</p>
      <img th:src="@{${user.profileImage}}" alt="프로필 사진" width="150" height="150">
    </div>

    <p>작성한 게시글 수: <span th:text="${postCount}">0</span></p>

    <div class="btn-container">
      <button type="submit">수정</button>
      <a th:href="@{/posts}" class="btn">목록으로</a>
    </div>
  </form>
</div>
</body>
</html>
